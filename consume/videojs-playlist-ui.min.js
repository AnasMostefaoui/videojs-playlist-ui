/*! @name videojs-playlist-ui @version 4.1.0 @license Apache-2.0 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("video.js")):"function"==typeof define&&define.amd?define(["video.js"],t):(e="undefined"!=typeof globalThis?globalThis:e||self).videojsPlaylistUi=t(e.videojs)}(this,(function(e){"use strict";function t(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var i=t(e);const s=i.default.dom||i.default,l=i.default.registerPlugin||i.default.plugin,n={className:"vjs-playlist",playOnSelect:!1,supportsCssPointerEvents:(()=>{const e=document.createElement("x");return e.style.cssText="pointer-events:auto","auto"===e.style.pointerEvents})()},a=function(e){e.addClass("vjs-selected")},o=function(e){e.removeClass("vjs-selected"),e.thumbnail&&s.removeClass(e.thumbnail,"vjs-playlist-now-playing")},d=function(e){e.removeClass("vjs-up-next")},p=i.default.getComponent("Component");class r extends p{constructor(e,t,i){if(!t.item)throw new Error("Cannot construct a PlaylistMenuItem without an item option");t.showDescription=i.showDescription,super(e,t),this.item=t.item,this.playOnSelect=i.playOnSelect,this.emitTapEvents(),this.on(["click","tap"],this.switchPlaylistItem_),this.on("keydown",this.handleKeyDown_)}handleKeyDown_(e){13!==e.which&&32!==e.which||this.switchPlaylistItem_()}switchPlaylistItem_(e){this.player_.playlist.currentItem(this.player_.playlist().indexOf(this.item)),this.playOnSelect&&this.player_.play()}createEl(){const e=document.createElement("li"),t=this.options_.item,s=this.options_.showDescription;if("object"==typeof t.data){Object.keys(t.data).forEach((i=>{const s=t.data[i];e.dataset[i]=s}))}if(e.className="vjs-playlist-item",e.setAttribute("tabIndex",0),this.thumbnail=function(e){if(!e){const e=document.createElement("div");return e.className="vjs-playlist-thumbnail vjs-playlist-thumbnail-placeholder",e}const t=document.createElement("picture");if(t.className="vjs-playlist-thumbnail","string"==typeof e){const i=document.createElement("img");i.loading="lazy",i.src=e,i.alt="",t.appendChild(i)}else{for(let i=0;i<e.length-1;i++){const s=e[i],l=document.createElement("source");for(const e in s)l[e]=s[e];t.appendChild(l)}const i=e[e.length-1],s=document.createElement("img");s.loading="lazy",s.alt="";for(const e in i)s[e]=i[e];t.appendChild(s)}return t}(t.thumbnail),e.appendChild(this.thumbnail),t.duration){const s=document.createElement("time"),l=i.default.formatTime(t.duration);s.className="vjs-playlist-duration",s.setAttribute("datetime","PT0H0M"+t.duration+"S"),s.appendChild(document.createTextNode(l)),e.appendChild(s)}const l=document.createElement("span"),n=this.localize("Now Playing");l.className="vjs-playlist-now-playing-text",l.appendChild(document.createTextNode(n)),l.setAttribute("title",n),this.thumbnail.appendChild(l);const a=document.createElement("span"),o=this.localize("Up Next");a.className="vjs-up-next-text",a.appendChild(document.createTextNode(o)),a.setAttribute("title",o),this.thumbnail.appendChild(a);const d=document.createElement("cite"),p=t.name||this.localize("Untitled Video");if(d.className="vjs-playlist-name",d.appendChild(document.createTextNode(p)),d.setAttribute("title",p),e.appendChild(d),s){const e=document.createElement("div"),i=t.description||"";e.className="vjs-playlist-description",e.appendChild(document.createTextNode(i)),e.setAttribute("title",i),titleContainerEl.appendChild(e)}return e}}class c extends p{constructor(e,t){if(!e.playlist)throw new Error("videojs-playlist is required for the playlist component");super(e,t),this.items=[],t.horizontal?this.addClass("vjs-playlist-horizontal"):this.addClass("vjs-playlist-vertical"),t.supportsCssPointerEvents&&this.addClass("vjs-csspointerevents"),this.createPlaylist_(),i.default.browser.TOUCH_ENABLED||this.addClass("vjs-mouse"),this.on(e,["loadstart","playlistchange","playlistsorted"],(e=>{this.update()})),this.on(e,"adstart",(()=>{this.addClass("vjs-ad-playing")})),this.on(e,"adend",(()=>{this.removeClass("vjs-ad-playing")})),this.on("dispose",(()=>{this.empty_(),e.playlistMenu=null})),this.on(e,"dispose",(()=>{this.dispose()}))}createEl(){return s.createEl("div",{className:this.options_.className})}empty_(){this.items&&this.items.length&&(this.items.forEach((e=>e.dispose())),this.items.length=0)}createPlaylist_(){const e=this.player_.playlist()||[];let t=this.el_.querySelector(".vjs-playlist-item-list"),i=this.el_.querySelector(".vjs-playlist-ad-overlay");t||(t=document.createElement("ol"),t.className="vjs-playlist-item-list",this.el_.appendChild(t)),this.empty_();for(let i=0;i<e.length;i++){const s=new r(this.player_,{item:e[i]},this.options_);this.items.push(s),t.appendChild(s.el_)}i||(i=document.createElement("li"),i.className="vjs-playlist-ad-overlay"),t.appendChild(i);const l=this.player_.playlist.currentItem();if(this.items.length&&l>=0){a(this.items[l]);const e=this.items[l].$(".vjs-playlist-thumbnail");e&&s.addClass(e,"vjs-playlist-now-playing")}}update(){const e=this.player_.playlist();if(this.items.length!==e.length)return void this.createPlaylist_();for(let t=0;t<this.items.length;t++)if(this.items[t].item!==e[t])return void this.createPlaylist_();const t=this.player_.playlist.currentItem();for(let e=0;e<this.items.length;e++){const i=this.items[e];e===t?(a(i),document.activeElement!==i.el()&&s.addClass(i.thumbnail,"vjs-playlist-now-playing"),d(i)):e===t+1?(o(i),i.addClass("vjs-up-next")):(o(i),d(i))}}}const u=e=>{for(let t=0;t<e.childNodes.length;t++)if(s.isEl(e.childNodes[t]))return!0;return!1},h=function(e){const t=this;if(!t.playlist)throw new Error("videojs-playlist plugin is required by the videojs-playlist-ui plugin");if(s.isEl(e)&&(i.default.log.warn('videojs-playlist-ui: Passing an element directly to playlistUi() is deprecated, use the "el" option instead!'),e={el:e}),e=i.default.mergeOptions(n,e),t.playlistMenu){const i=t.playlistMenu.el();if(i){const l=i.parentNode,n=i.nextSibling;t.playlistMenu.dispose(),s.emptyEl(i),n?l.insertBefore(i,n):l.appendChild(i),e.el=i}}s.isEl(e.el)||(e.el=(e=>{const t=document.querySelectorAll("."+e);let i;for(let e=0;e<t.length;e++)if(!u(t[e])){i=t[e];break}return i})(e.className)),t.playlistMenu=new c(t,e)};return i.default.registerComponent("PlaylistMenu",c),i.default.registerComponent("PlaylistMenuItem",r),l("playlistUi",h),h.VERSION="4.1.0",i.default.addLanguage("ar",{"Next playlist item":"عنصر قائمة التشغيل التالي","Up next in {1} seconds":"التالي خلال {1} ثوان","Up next":"التالي","Now Playing":"قيد التشغيل الآن","Up Next":"التالي","Untitled Video":"مقطع فيديو بدون عنوان"}),i.default.addLanguage("de",{"Next playlist item":"Nächstes Objekt der Wiedergabeliste","Up next in {1} seconds":"Nächstes in {1} Sekunden","Up next":"Als Nächstes","Now Playing":"Aktuelle Wiedergabe","Up Next":"Als Nächstes","Untitled Video":"Video ohne Titel"}),i.default.addLanguage("es",{"Next playlist item":"Siguiente título de la lista de reproducción","Up next in {1} seconds":"Siguiente en {1} segundos","Up next":"Siguiente","Now Playing":"Reproduciendo","Up Next":"Siguiente","Untitled Video":"Vídeo sin título"}),i.default.addLanguage("fr",{"Next playlist item":"Prochain élément de la liste de lecture","Up next in {1} seconds":"À suivre dans {1} secondes","Up next":"À suivre","Now Playing":"En cours de lecture","Up Next":"À suivre","Untitled Video":"Vidéo sans titre"}),i.default.addLanguage("ja",{"Next playlist item":"次のプレイリスト項目","Up next in {1} seconds":"{1} 秒後に次の動画","Up next":"次の動画","Now Playing":"現在再生中","Up Next":"次の動画","Untitled Video":"無題の動画"}),i.default.addLanguage("ko",{"Next playlist item":"다음 재생 목록 항목","Up next in {1} seconds":"{1}초 후 다음 재생","Up next":"다음 재생","Now Playing":"지금 재생 중","Up Next":"다음 재생","Untitled Video":"제목 없는 비디오"}),i.default.addLanguage("zh-Hans",{"Next playlist item":"下一个播放列表项目","Up next in {1} seconds":"{1} 秒后播放下一个","Up next":"播放下一个","Now Playing":"正在播放","Up Next":"播放下一个","Untitled Video":"无标题视频"}),i.default.addLanguage("zh-Hant",{"Next playlist item":"下一個播放清單項目","Up next in {1} seconds":"{1} 秒後播放下一個","Up next":"播放下一個","Now Playing":"正在播放","Up Next":"播放下一個","Untitled Video":"未命名視訊"}),h}));
