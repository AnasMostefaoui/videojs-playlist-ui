/*! @name videojs-playlist-ui @version 4.1.0 @license Apache-2.0 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("video.js")):"function"==typeof define&&define.amd?define(["video.js"],e):(t="undefined"!=typeof globalThis?globalThis:t||self).videojsPlaylistUi=e(t.videojs)}(this,(function(t){"use strict";function e(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var i=e(t);const s=i.default.dom||i.default,l=i.default.registerPlugin||i.default.plugin,n={className:"vjs-playlist",playOnSelect:!1,supportsCssPointerEvents:(()=>{const t=document.createElement("x");return t.style.cssText="pointer-events:auto","auto"===t.style.pointerEvents})()},a=function(t){t.addClass("vjs-selected")},d=function(t){t.removeClass("vjs-selected"),t.thumbnail&&s.removeClass(t.thumbnail,"vjs-playlist-now-playing")},r=function(t){t.removeClass("vjs-up-next")},p=i.default.getComponent("Component");class c extends p{constructor(t,e,i){if(!e.item)throw new Error("Cannot construct a PlaylistMenuItem without an item option");e.showDescription=i.showDescription,super(t,e),this.item=e.item,this.playOnSelect=i.playOnSelect,this.emitTapEvents(),this.on(["click","tap"],this.switchPlaylistItem_),this.on("keydown",this.handleKeyDown_)}handleKeyDown_(t){13!==t.which&&32!==t.which||this.switchPlaylistItem_()}switchPlaylistItem_(t){this.player_.playlist.currentItem(this.player_.playlist().indexOf(this.item)),this.playOnSelect&&this.player_.play()}createEl(){const t=document.createElement("li"),e=this.options_.item;if(this.options_.showDescription,"object"==typeof e.data){Object.keys(e.data).forEach((i=>{const s=e.data[i];t.dataset[i]=s}))}t.className="vjs-playlist-item",t.setAttribute("tabIndex",0),this.thumbnail=function(t){if(!t){const t=document.createElement("div");return t.className="vjs-playlist-thumbnail vjs-playlist-thumbnail-placeholder",t}const e=document.createElement("picture");if(e.className="vjs-playlist-thumbnail","string"==typeof t){const i=document.createElement("img");i.loading="lazy",i.src=t,i.alt="",e.appendChild(i)}else{for(let i=0;i<t.length-1;i++){const s=t[i],l=document.createElement("source");for(const t in s)l[t]=s[t];e.appendChild(l)}const i=t[t.length-1],s=document.createElement("img");s.loading="lazy",s.alt="";for(const t in i)s[t]=i[t];e.appendChild(s)}return e}(e.thumbnail),t.appendChild(this.thumbnail);const s=document.createElement("span"),l=this.localize("Now Playing");s.className="vjs-playlist-now-playing-text",s.appendChild(document.createTextNode(l)),s.setAttribute("title",l),this.thumbnail.appendChild(s);const n=document.createElement("span"),a=this.localize("Up Next");n.className="vjs-up-next-text",n.appendChild(document.createTextNode(a)),n.setAttribute("title",a),this.thumbnail.appendChild(n);const o=document.createElement("cite"),d=e.name||this.localize("Untitled Video");if(o.className="vjs-playlist-name",o.appendChild(document.createTextNode(d)),o.setAttribute("title",d),t.appendChild(o),e.duration){const s=document.createElement("div");s.className="vjs-playlist-duration-container",s.innerHTML='<svg class="icon icon--play icon--primary icon--16" viewBox="0 0 20 20" version="1.1" aria-hidden="true"><title>play</title><path class="icon-main-color" d="M0 10a10 10 0 1 1 10 10A10 10 0 0 1 0 10zm7.92 4.27a.48.48 0 0 0 .23-.07L14 10.35a.42.42 0 0 0 0-.7L8.15 5.8a.42.42 0 0 0-.43 0 .4.4 0 0 0-.22.36v7.7a.4.4 0 0 0 .22.36.36.36 0 0 0 .2.05z"></path></svg>';const l=document.createElement("time"),n=i.default.formatTime(e.duration);l.className="vjs-playlist-duration",l.setAttribute("datetime","PT0H0M"+e.duration+"S"),l.appendChild(document.createTextNode(n)),s.appendChild(l),t.appendChild(s)}return t}}class u extends p{constructor(t,e){if(!t.playlist)throw new Error("videojs-playlist is required for the playlist component");super(t,e),this.items=[],e.horizontal?this.addClass("vjs-playlist-horizontal"):this.addClass("vjs-playlist-vertical"),e.supportsCssPointerEvents&&this.addClass("vjs-csspointerevents"),this.createPlaylist_(),i.default.browser.TOUCH_ENABLED||this.addClass("vjs-mouse"),this.on(t,["loadstart","playlistchange","playlistsorted"],(t=>{this.update()})),this.on(t,"adstart",(()=>{this.addClass("vjs-ad-playing")})),this.on(t,"adend",(()=>{this.removeClass("vjs-ad-playing")})),this.on("dispose",(()=>{this.empty_(),t.playlistMenu=null})),this.on(t,"dispose",(()=>{this.dispose()}))}createEl(){return s.createEl("div",{className:this.options_.className})}empty_(){this.items&&this.items.length&&(this.items.forEach((t=>t.dispose())),this.items.length=0)}createPlaylist_(){const t=this.player_.playlist()||[];let e=this.el_.querySelector(".vjs-playlist-item-list"),i=this.el_.querySelector(".vjs-playlist-ad-overlay");e||(e=document.createElement("ol"),e.className="vjs-playlist-item-list",this.el_.appendChild(e)),this.empty_();for(let i=0;i<t.length;i++){const s=new c(this.player_,{item:t[i]},this.options_);this.items.push(s),e.appendChild(s.el_)}i||(i=document.createElement("li"),i.className="vjs-playlist-ad-overlay"),e.appendChild(i);const l=this.player_.playlist.currentItem();if(this.items.length&&l>=0){a(this.items[l]);const t=this.items[l].$(".vjs-playlist-thumbnail");t&&s.addClass(t,"vjs-playlist-now-playing")}}update(){const t=this.player_.playlist();if(this.items.length!==t.length)return void this.createPlaylist_();for(let e=0;e<this.items.length;e++)if(this.items[e].item!==t[e])return void this.createPlaylist_();const e=this.player_.playlist.currentItem();for(let t=0;t<this.items.length;t++){const i=this.items[t];t===e?(a(i),document.activeElement!==i.el()&&s.addClass(i.thumbnail,"vjs-playlist-now-playing"),r(i)):t===e+1?(d(i),i.addClass("vjs-up-next")):(d(i),r(i))}}}const h=t=>{for(let e=0;e<t.childNodes.length;e++)if(s.isEl(t.childNodes[e]))return!0;return!1},m=function(t){const e=this;if(!e.playlist)throw new Error("videojs-playlist plugin is required by the videojs-playlist-ui plugin");if(s.isEl(t)&&(i.default.log.warn('videojs-playlist-ui: Passing an element directly to playlistUi() is deprecated, use the "el" option instead!'),t={el:t}),t=i.default.mergeOptions(n,t),e.playlistMenu){const i=e.playlistMenu.el();if(i){const l=i.parentNode,n=i.nextSibling;e.playlistMenu.dispose(),s.emptyEl(i),n?l.insertBefore(i,n):l.appendChild(i),t.el=i}}s.isEl(t.el)||(t.el=(t=>{const e=document.querySelectorAll("."+t);let i;for(let t=0;t<e.length;t++)if(!h(e[t])){i=e[t];break}return i})(t.className)),e.playlistMenu=new u(e,t)};i.default.registerComponent("PlaylistMenu",u),i.default.registerComponent("PlaylistMenuItem",c);var y=function(t){function e(e,i){var s;return(s=t.call(this,e,i)||this).controlText(s.localize("Next playlist item")),s.on(e,["adstart"],s.disable),s.on(e,["adend","adtimeout"],s.enable),s}o(e,t);var i=e.prototype;return i.buildCSSClass=function(){return"vjs-next-button "+t.prototype.buildCSSClass.call(this)},i.createEl=function(){return t.prototype.createEl.call(this,"button",{innerHTML:'<span class="vjs-icon-placeholder" aria-hidden="true"></span>'})},i.handleClick=function(t){this.player_.playlist.next(),this.options_.playOnSelect&&this.player_.play()},e}(i.default.getComponent("Button"));return i.default.registerComponent("NextButton",y),l("playlistUi",m),m.VERSION="4.1.0",i.default.addLanguage("ar",{"Next playlist item":"عنصر قائمة التشغيل التالي","Up next in {1} seconds":"التالي خلال {1} ثوان","Up next":"التالي","Now Playing":"يعرض الآن","Up Next":"التالي","Untitled Video":"مقطع فيديو بدون عنوان"}),i.default.addLanguage("de",{"Next playlist item":"Nächstes Objekt der Wiedergabeliste","Up next in {1} seconds":"Nächstes in {1} Sekunden","Up next":"Als Nächstes","Now Playing":"Aktuelle Wiedergabe","Up Next":"Als Nächstes","Untitled Video":"Video ohne Titel"}),i.default.addLanguage("es",{"Next playlist item":"Siguiente título de la lista de reproducción","Up next in {1} seconds":"Siguiente en {1} segundos","Up next":"Siguiente","Now Playing":"Reproduciendo","Up Next":"Siguiente","Untitled Video":"Vídeo sin título"}),i.default.addLanguage("fr",{"Next playlist item":"Prochain élément de la liste de lecture","Up next in {1} seconds":"À suivre dans {1} secondes","Up next":"À suivre","Now Playing":"En cours de lecture","Up Next":"À suivre","Untitled Video":"Vidéo sans titre"}),i.default.addLanguage("ja",{"Next playlist item":"次のプレイリスト項目","Up next in {1} seconds":"{1} 秒後に次の動画","Up next":"次の動画","Now Playing":"現在再生中","Up Next":"次の動画","Untitled Video":"無題の動画"}),i.default.addLanguage("ko",{"Next playlist item":"다음 재생 목록 항목","Up next in {1} seconds":"{1}초 후 다음 재생","Up next":"다음 재생","Now Playing":"지금 재생 중","Up Next":"다음 재생","Untitled Video":"제목 없는 비디오"}),i.default.addLanguage("zh-Hans",{"Next playlist item":"下一个播放列表项目","Up next in {1} seconds":"{1} 秒后播放下一个","Up next":"播放下一个","Now Playing":"正在播放","Up Next":"播放下一个","Untitled Video":"无标题视频"}),i.default.addLanguage("zh-Hant",{"Next playlist item":"下一個播放清單項目","Up next in {1} seconds":"{1} 秒後播放下一個","Up next":"播放下一個","Now Playing":"正在播放","Up Next":"播放下一個","Untitled Video":"未命名視訊"}),m}));
